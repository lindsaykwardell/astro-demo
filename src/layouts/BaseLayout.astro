---
// Component Imports
import BaseHead from '../components/BaseHead.astro';
import DarkModeButton from '../components/DarkModeButton.vue'
import { fetchFromGitHub } from '../api/github.mJs';

let title = 'Lindsay Wardell';
let description = 'An awesome person writing awesome stuff';
let permalink = 'https://lindsaykwardell.com/';

let github = await fetchFromGitHub(`
      query {
        user(login:"lindsaykwardell"){
          name
          bio
          isHireable
          url
          avatarUrl
          pinnedItems(first:6,types:[REPOSITORY]) {
            nodes{
              ... on Repository {
                name
                url
                description
                stargazerCount
                licenseInfo{
                  name
                }
                primaryLanguage {
                  color
                  name
                }
              }
            }
          }
          repositories(first:6, orderBy:{
            field:UPDATED_AT, direction: DESC
          }){
            nodes{
              name
              url
              description
              stargazerCount
              licenseInfo{
                name
              }
              primaryLanguage {
                color
                name
              }
            }
          }
        }
      }
      `)
---
<html lang="en">
  <head>
    <BaseHead title={title} description={description} permalink={permalink}>
      <slot name="head"></slot>
    </BaseHead>
  </head>

  <body>
    <div class="relative">
      <nav
        class="bg-lindsay w-full h-16 md:h-20 flex items-center px-6 shadow-md fixed z-10"
      >
        <a href="/" class="flex items-center hover:no-underline">
          <img
            src={github.user.avatarUrl}
            class="w-12 h-12 md:w-16 md:h-16 rounded-full"
            alt="Lindsay Wardell"
          />
          <h3 class="text-white pl-3 hidden md:block">Lindsay Wardell</h3>
        </a>
        <div class="flex-grow flex justify-end text-white text-lg">
          <a href="/" class="px-4 py-2 rounded hidden sm:inline">Home</a>
          <nuxt-link to="/about-me" class="px-4 py-2 rounded hide-too-small whitespace-nowrap"
            >About <span class="hidden sm:inline">Me</span></nuxt-link
          >
          <a href="/blog" class="px-4 py-2 rounded">Blog</a>
          <nuxt-link to="/podcast" class="px-4 py-2 rounded">Podcast</nuxt-link>
        </div>
      </nav>
      <main>
        <slot></slot>
      </main>
      <DarkModeButton client:only />
    </div>
  </body>
</html>